const express=require("express"),cors=require("cors"),morgan=require("morgan"),{PrismaClient:PrismaClient}=require("@prisma/client"),{MOTIVOS_ADMINISTRATIVOS:MOTIVOS_ADMINISTRATIVOS}=require("./constantes"),authRutas=require("./api/auth.rutas"),solicitudesRutas=require("./api/solicitudes.rutas"),areasRutas=require("./api/areas.rutas"),usuariosRutas=require("./api/usuarios.rutas"),app=express();app.use(cors()),app.use(express.json()),app.use(morgan("dev")),app.get("/api",(req,res)=>{res.json({mensaje:"API del Sistema de Gestión de Permisos funcionando"})}),app.get("/api/opciones/motivos",(req,res)=>{res.json(MOTIVOS_ADMINISTRATIVOS)}),app.use("/api/auth",authRutas),app.use("/api/solicitudes",solicitudesRutas),app.use("/api/areas",areasRutas),app.use("/api/usuarios",usuariosRutas),app.use((err,req,res,next)=>{console.error(err.stack),res.status(500).send("¡Algo salió mal!")});const PORT=process.env.PORT||4e3;app.listen(PORT,()=>{console.log(`Backend escuchando en http://localhost:${PORT}`)});